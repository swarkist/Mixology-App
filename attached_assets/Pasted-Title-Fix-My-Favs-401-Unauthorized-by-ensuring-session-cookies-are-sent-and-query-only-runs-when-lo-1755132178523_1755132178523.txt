Title
Fix My Favs 401 Unauthorized by ensuring session cookies are sent and query only runs when logged in

Overview
Currently, GET /api/cocktails?favoriteOnly=true returns 401 because the browser isn’t sending the session cookie and the query still fires when the user is logged out. This prompt will:
1. Update apiRequest in client/src/lib/queryClient.ts to always send credentials: 'include' so cookies are attached to every request.
2. Update client/src/lib/favorites.ts so useFavoriteIds interprets 401 as isAuthed: false and avoids breaking the UI.
3. Update client/src/pages/CocktailList.tsx so the My Favs query is enabled only when isAuthed === true, preventing it from firing and 401ing for logged-out users.
4. Update server/index.ts (or wherever Express is configured) so CORS is set with credentials: true, session middleware is before routes, and cookie sameSite/secure settings allow the browser to store and send the session cookie in dev and prod.

Tasks

1) client/src/lib/queryClient.ts
- In apiRequest, ensure credentials: 'include' is set on every fetch call so cookies are sent.
- Keep Content-Type header unless overridden.
- Throw on non-OK responses to bubble errors to callers.

2) client/src/lib/favorites.ts
- In useFavoriteIds, wrap the fetch in try/catch. If 401, return { ids: [], isAuthed: false }.
- In useToggleFavorite, preserve optimistic update logic but ensure queries are invalidated for /api/cocktails as well after toggling.

3) client/src/pages/CocktailList.tsx
- Get isAuthed from favData?.isAuthed === true.
- Default cocktails list query runs when !isMyFavs.
- My Favs query runs only when isMyFavs && isAuthed.
- If isMyFavs && !isAuthed, show “Login to view your favorite recipes” instead of firing the query.

4) server/index.ts (or equivalent app bootstrap)
- Configure CORS with:
    origin: allowlist from process.env.CORS_ORIGINS (split on commas, trimmed)
    credentials: true
- app.options('*', cors(...)) to handle preflights.
- app.set('trust proxy', 1) for Replit/proxy.
- Express session middleware BEFORE passport and routes:
    secret: process.env.SESSION_SECRET
    resave: false
    saveUninitialized: false
    cookie:
        httpOnly: true
        secure: true  // for HTTPS
        sameSite: 'none'  // for cross-site cookie use
        maxAge: 7 days
- Ensure CORS_ORIGINS env contains the exact origin for your dev and prod domains (no trailing slash).

Validation
- Log in and verify /api/user/favorites returns 200 with your IDs.
- My Favs pill shows list without error when logged in.
- My Favs pill shows login message and no network call when logged out.
- Network tab shows /api/cocktails?favoriteOnly=true requests include Cookie header with connect.sid (or your session name).
- Regression tests in tests/regression/api.test.ts still pass.

